{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\latar\\\\OneDrive\\\\\\u10E1\\u10D0\\u10DB\\u10E3\\u10E8\\u10D0\\u10DD \\u10D3\\u10D0\\u10E4\\u10D0\\\\Projects Of 2022\\\\campus\\\\public\\\\src\\\\context.js\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n\nimport React, { useState, useContext, useEffect } from 'react';\nimport { useCallback } from 'react';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst AppContext = /*#__PURE__*/React.createContext();\n\nconst AppProvider = _ref => {\n  _s();\n\n  let {\n    children\n  } = _ref;\n  const [loading, setLoading] = useState(true);\n  const [searchTerm, setSearchTerm] = useState('');\n  const [people, setPoeple] = useState([]);\n  const [registered_users, setRegistered_Users] = useState([]);\n  const [users_term, setUsers_term] = useState('');\n  const getPeople = useCallback(async () => {\n    setLoading(true);\n\n    try {\n      const vis = await axios.post('http://localhost:4000/getPeople');\n      const data = vis.data.map(user => {\n        const result = user.visitors.filter(data => {\n          if (data.name.toUpperCase() === searchTerm.toUpperCase() || data.id === searchTerm) {\n            return data;\n          }\n        });\n\n        if (result.length !== 0) {\n          let finalResult = {\n            user_name: user.name,\n            user_surname: user.surname,\n            user_status: user.status,\n            visitors: result\n          };\n          return finalResult;\n        } else {\n          return null;\n        }\n      });\n      const clearedData = data.filter(item => item != null);\n      setPoeple(clearedData);\n    } catch (err) {\n      console.log(err.message);\n      setLoading(false);\n    }\n  }, [searchTerm]);\n  const getUsers = useCallback(async () => {\n    try {\n      const {\n        data\n      } = await axios.get('http://localhost:4000/admin');\n      const answer = data.filter(user => {\n        if (user.id === users_term || user.name.toUpperCase() === users_term.toUpperCase()) {\n          return user;\n        }\n      });\n      setRegistered_Users(answer);\n    } catch (err) {\n      console.log(err.message);\n    }\n  }, [users_term]);\n\n  const addToBlackList = async id => {\n    await axios.post(`http://localhost:4000/admin/${id}`).then(users => setData(users.data)).catch(err => console.log(err));\n  };\n\n  const edit = async (id, feature) => {\n    let value;\n\n    if (feature === 'blacked') {\n      value = prompt(\"Are you sure?\");\n    } else {\n      value = prompt(`Enter your new ${feature}`);\n    }\n\n    await axios.post(`http://localhost:4000/admin/edit/${id}/${feature}/${value}`).then(users => setRegistered_Users(users.data)).catch(err => console.log(err));\n  };\n\n  useEffect(() => {\n    getPeople();\n  }, [setSearchTerm, getPeople]);\n  useEffect(() => {\n    getUsers();\n  }, [users_term]);\n  return /*#__PURE__*/_jsxDEV(AppContext.Provider, {\n    value: {\n      loading,\n      searchTerm,\n      setSearchTerm,\n      people,\n      users_term,\n      setUsers_term,\n      registered_users,\n      addToBlackList,\n      edit\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 92,\n    columnNumber: 9\n  }, this);\n};\n\n_s(AppProvider, \"TlV+SQkOfhLA/S+Uy7mE6h6d26c=\");\n\n_c = AppProvider;\nexport const useGlobalContext = () => {\n  _s2();\n\n  return useContext(AppContext);\n};\n\n_s2(useGlobalContext, \"gDsCjeeItUuvgOWf1v4qoK9RF6k=\");\n\nexport { AppContext, AppProvider };\n\nvar _c;\n\n$RefreshReg$(_c, \"AppProvider\");","map":{"version":3,"names":["React","useState","useContext","useEffect","useCallback","axios","AppContext","createContext","AppProvider","children","loading","setLoading","searchTerm","setSearchTerm","people","setPoeple","registered_users","setRegistered_Users","users_term","setUsers_term","getPeople","vis","post","data","map","user","result","visitors","filter","name","toUpperCase","id","length","finalResult","user_name","user_surname","surname","user_status","status","clearedData","item","err","console","log","message","getUsers","get","answer","addToBlackList","then","users","setData","catch","edit","feature","value","prompt","useGlobalContext"],"sources":["C:/Users/latar/OneDrive/სამუშაო დაფა/Projects Of 2022/campus/public/src/context.js"],"sourcesContent":["import React, { useState, useContext, useEffect } from 'react'\r\nimport { useCallback } from 'react'\r\nimport axios from 'axios'\r\n\r\nconst AppContext = React.createContext()\r\n\r\nconst AppProvider = ({ children }) => {\r\n    const [loading, setLoading] = useState(true)\r\n    const [searchTerm, setSearchTerm] = useState('')\r\n    const [people, setPoeple] = useState([])\r\n    const [registered_users, setRegistered_Users] = useState([]);\r\n    const [users_term, setUsers_term] = useState('');\r\n\r\n    const getPeople = useCallback(async () => {\r\n        setLoading(true);\r\n        try {\r\n            const vis = await axios.post('http://localhost:4000/getPeople')\r\n            const data = vis.data.map((user) => {\r\n                const result = user.visitors.filter((data) => {\r\n                    if (data.name.toUpperCase() === searchTerm.toUpperCase() || data.id === searchTerm) {\r\n                        return data;\r\n                    }\r\n                })\r\n\r\n                if (result.length !== 0) {\r\n                    let finalResult = {\r\n                        user_name: user.name,\r\n                        user_surname: user.surname,\r\n                        user_status: user.status,\r\n                        visitors: result\r\n                    }\r\n                    return finalResult;\r\n                } else {\r\n                    return null\r\n                }\r\n            })\r\n            const clearedData = data.filter((item) => item != null)\r\n            setPoeple(clearedData)\r\n\r\n        } catch (err) {\r\n            console.log(err.message)\r\n            setLoading(false);\r\n        }\r\n\r\n    }, [searchTerm])\r\n\r\n    const getUsers = useCallback(async () => {\r\n        try {\r\n            const { data } = await axios.get('http://localhost:4000/admin')\r\n            const answer = data.filter((user) => {\r\n                if (user.id === users_term || user.name.toUpperCase() === users_term.toUpperCase()) {\r\n                    return user\r\n                }\r\n            })\r\n            setRegistered_Users(answer);\r\n        } catch (err) {\r\n            console.log(err.message);\r\n        }\r\n    }, [users_term])\r\n\r\n    const addToBlackList = async (id) => {\r\n        await axios.post(`http://localhost:4000/admin/${id}`)\r\n            .then((users) => setData(users.data))\r\n            .catch((err) => console.log(err))\r\n    }\r\n\r\n\r\n    const edit = async (id, feature) => {\r\n        let value;\r\n        if (feature === 'blacked') {\r\n            value = prompt(\"Are you sure?\")\r\n        } else {\r\n            value = prompt(`Enter your new ${feature}`)\r\n        }\r\n\r\n        await axios.post(`http://localhost:4000/admin/edit/${id}/${feature}/${value}`)\r\n            .then((users) => setRegistered_Users(users.data))\r\n            .catch((err) => console.log(err))\r\n\r\n    }\r\n\r\n\r\n    useEffect(() => {\r\n        getPeople();\r\n    }, [setSearchTerm, getPeople])\r\n\r\n    useEffect(() => {\r\n        getUsers();\r\n    }, [users_term])\r\n\r\n    return (\r\n        <AppContext.Provider value={{\r\n            loading, searchTerm, setSearchTerm, people, users_term, setUsers_term, registered_users, addToBlackList, edit\r\n        }}>\r\n            {children}\r\n        </AppContext.Provider>\r\n    )\r\n}\r\n\r\nexport const useGlobalContext = () => {\r\n    return useContext(AppContext)\r\n}\r\n\r\nexport { AppContext, AppProvider }"],"mappings":"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"},"metadata":{},"sourceType":"module"}